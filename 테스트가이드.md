# 저장 및 중복 작성 기능 테스트 가이드

## ✅ 구현된 기능

### 1. 자동 저장 기능
- 스케줄을 추가하면 즉시 서버의 `schedules.json` 파일에 저장됩니다
- 스케줄을 수정하면 자동으로 업데이트됩니다
- 스케줄을 삭제하면 서버에서도 삭제됩니다

### 2. 중복 작성 가능
- **같은 날짜, 같은 시간**에 **여러 상담사**가 각각 스케줄을 작성할 수 있습니다
- 한 셀에 여러 스케줄이 표시됩니다
- 각 상담사별로 다른 색상으로 구분됩니다

## 🧪 테스트 방법

### 1. 서버 실행 확인
현재 서버가 실행 중이어야 합니다. 실행 중이 아니라면:
```
시작.bat 파일을 더블클릭
```

또는 PowerShell에서:
```powershell
& "C:\Program Files\nodejs\node.exe" server.js
```

### 2. 브라우저에서 접속
```
http://localhost:3000
```

### 3. 저장 기능 테스트

#### 테스트 1: 스케줄 추가 및 저장
1. "스케줄 추가" 버튼 클릭
2. 정보 입력:
   - 상담사: 김상담
   - 날짜: 2026-01-20 (월요일)
   - 시작 시간: 10:00
   - 종료 시간: 11:00
   - 내담자명: 홍길동
   - 회기: 1
3. "저장" 클릭
4. ✅ 스케줄이 캘린더에 표시되는지 확인

#### 테스트 2: 저장 확인
1. 브라우저를 **완전히 닫기** (F5 새로고침이 아님)
2. 브라우저를 다시 열고 `http://localhost:3000` 접속
3. ✅ 이전에 추가한 스케줄이 그대로 표시되는지 확인

#### 테스트 3: 같은 시간대에 다른 상담사 추가
1. 같은 날짜(2026-01-20), 같은 시간(10:00-11:00)의 셀 클릭
2. 다른 상담사 정보 입력:
   - 상담사: 이상담
   - 날짜: 2026-01-20
   - 시작 시간: 10:00
   - 종료 시간: 11:00
   - 내담자명: 김철수
   - 회기: 3
3. "저장" 클릭
4. ✅ 같은 셀에 두 개의 스케줄이 표시되는지 확인
5. ✅ 각 스케줄이 다른 색상으로 표시되는지 확인

#### 테스트 4: 세 번째 상담사 추가
1. 다시 같은 셀 클릭
2. 세 번째 상담사 정보 입력:
   - 상담사: 박상담
   - 날짜: 2026-01-20
   - 시간: 10:00-11:00
   - 내담자명: 이영희
   - 회기: 5
3. "저장" 클릭
4. ✅ 같은 셀에 세 개의 스케줄이 표시되는지 확인
5. ✅ 셀에 스크롤이 생기는지 확인 (많은 스케줄이 있을 때)

#### 테스트 5: 수정 기능
1. 첫 번째 스케줄(김상담) 클릭
2. 회기를 2로 변경
3. "저장" 클릭
4. ✅ 변경사항이 즉시 반영되는지 확인

#### 테스트 6: 삭제 기능
1. 두 번째 스케줄(이상담)에서 **우클릭**
2. 삭제 확인
3. ✅ 해당 스케줄만 삭제되고 다른 스케줄은 유지되는지 확인

#### 테스트 7: 필터 기능
1. 상단의 상담사 필터에서 "김상담" 선택
2. ✅ 김상담의 스케줄만 표시되는지 확인
3. "전체 상담사" 선택
4. ✅ 모든 스케줄이 다시 표시되는지 확인

### 4. 데이터 파일 확인
프로젝트 폴더에서 `schedules.json` 파일을 열어보세요:
```
C:\Users\user\.gemini\antigravity\scratch\counseling-schedule\schedules.json
```

이 파일에 모든 스케줄 데이터가 JSON 형식으로 저장되어 있습니다.

## 🌐 여러 컴퓨터에서 테스트

### 같은 컴퓨터에서 여러 브라우저 창으로 테스트
1. 첫 번째 브라우저 창: `http://localhost:3000`
2. 두 번째 브라우저 창: `http://localhost:3000`
3. 한 창에서 스케줄 추가
4. 다른 창에서 **새로고침(F5)**
5. ✅ 추가한 스케줄이 다른 창에도 표시되는지 확인

### 다른 컴퓨터에서 테스트 (같은 네트워크)
1. 서버 컴퓨터에서 IP 확인:
   ```powershell
   ipconfig
   ```
   (IPv4 주소 확인, 예: 192.168.0.100)

2. 다른 컴퓨터의 브라우저에서:
   ```
   http://[서버IP]:3000
   ```
   예: `http://192.168.0.100:3000`

3. ✅ 같은 데이터가 표시되는지 확인
4. ✅ 한 컴퓨터에서 추가한 스케줄이 다른 컴퓨터에서도 보이는지 확인 (새로고침 필요)

## 📝 주요 특징

### 자동 저장
- localStorage 대신 서버 API 사용
- 모든 변경사항이 즉시 `schedules.json`에 저장
- 브라우저를 닫아도 데이터 유지

### 중복 작성
- 같은 시간대에 무제한 스케줄 추가 가능
- 각 상담사별 색상 구분 (최대 7가지 색상)
- 스크롤로 많은 스케줄 확인 가능

### 실시간 동기화
- 여러 사용자가 동시에 접속 가능
- 각자 추가/수정/삭제 가능
- 새로고침하면 최신 데이터 확인

## ⚠️ 주의사항

1. **서버가 실행 중이어야 합니다**
   - 서버가 꺼지면 데이터 저장/불러오기 불가
   - `시작.bat`으로 쉽게 시작 가능

2. **새로고침 필요**
   - 다른 사용자가 추가한 스케줄을 보려면 F5로 새로고침
   - 자동 새로고침은 구현되지 않음

3. **데이터 백업**
   - `schedules.json` 파일을 정기적으로 백업하세요
   - 이 파일이 삭제되면 모든 데이터 손실

## 🎨 색상 구분

각 상담사는 자동으로 다른 색상이 할당됩니다:
1. 첫 번째 상담사: 파란색
2. 두 번째 상담사: 보라색
3. 세 번째 상담사: 분홍색
4. 네 번째 상담사: 주황색
5. 다섯 번째 상담사: 초록색
6. 여섯 번째 상담사: 하늘색
7. 일곱 번째 상담사: 빨간색
8. 8번째부터는 색상이 반복됩니다
